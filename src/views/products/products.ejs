<!DOCTYPE html>
<html lang="en">
  <!-- head -->
  
  <%- include('../partials/head') %> 
  <body>
    <%- include('../partials/header') %> 

    <main>
      <section class="top-list">
      <div class="title"><h1>Products</h1></div>
      <div class="createproduct">
      <% if (locals.isAdmin) { %>
        <a href="/products/create"><button type="button" class="btn1"> Create</button></a>
      <% } %>
      </div>
      </section>
      <hr/>
      <section class="filter-view">
      <div class="product-search" id="search">
        <form class="searchbar">
          <input type="text" placeholder="Search" />
          <i class="fa-solid fa-magnifying-glass"></i>
        </form>
      </div>
    </section>
    <hr/>
    <section class="product-list">
      <% products.forEach(product => { %>
        <article class="product">
          <a class ="product-a" href="/products/<%= product.id %>/edit">
          <figure class="imageproducts">
            <img  src="/images/products/<%= product.images[0].name %>" alt="">
          </figure>
          <div class="producttext">
            <h4>Details</h4>
            <p>
              <%= product.name %>
            </p>
            <p>
              $ <%= product.price %>
             </p>
             <p>
               <%= product.discount %> %OFF
             </p>
             <h3>Description</h3>
             <p>
              <%= product.description %>
             </p>
          </div>
        </a>
        <% if (locals.isAdmin) { %>
         
          <div class="div-btn">
          <a class="btn btn-edit" href="/products/<%= product.id %>/edit">edit</a>
          <form action="/products/<%= product.id %>/delete?_method=DELETE" method = "post">
            <button  class = "btn"type="submit"> DELETE</button>
          </form>
        </div>
        <% } %>
    </article>
       <% }) %>
    </section>
    
    </main>

  <!-- Bottom Nav -->

    <%- include('../partials/bottomNav') %> 

  <!-- Footer -->

    <%- include('../partials/footer') %> 
  </body>
</html>
